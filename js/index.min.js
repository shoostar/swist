function lazyLoadBg(el,imageSource){$("<img/>").attr("src",imageSource).on({load:function(){$(this).remove(),$(el).css("backgroundImage","url("+imageSource+")"),$(el).css("opacity","1")},error:function(){$(this).remove()}})}function parallax(){window.scrollY<coverHeight&&(translate=Math.round(window.scrollY/parallaxThreshold),window.requestAnimationFrame(function(){cover.style.transform="translateY("+translate+"px)"}))}function debounce(fn,wait){var timeout;return function(){clearTimeout(timeout),timeout=setTimeout(function(){fn.apply(this,arguments)},wait||1)}}$(".lazy").each(function(index,el){lazyLoadBg(el,$(el).data("src"))});var cover=document.querySelector(".parallax"),coverHeight=Math.round(cover.offsetHeight),translate,parallaxThreshold=3;parallax(),window.addEventListener("scroll",parallax,!1),window.addEventListener("resize",debounce(function(){coverHeight=Math.round(cover.offsetHeight)},800));